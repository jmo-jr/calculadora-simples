<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="Set-Cookie" content="HttpOnly;Secure;SameSite=Strict">
  <title>Ellun Contabilidade | Calculadora Tributária</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <style>
    header {
      height: 80px;
      padding: 8px 16px;
      background-color: rgba(0, 0, 0, 0.62);
    }
    h1 {
      font-size: 24px;
    }
    button {
      margin-bottom: 20px;
    }
    .inline-input {
      display: inline-flex;
      width: 67%;
      justify-content: space-between;
      align-items: flex-start;
    }
    #proLab5 { width: auto; }
  </style>
</head>

<body>

  <header>
    <div class="container">
      <a class="navbar-brand" href="https://ellun.com.br">
        <img src="https://ellun.com.br/wp-content/uploads/2019/08/1.png" alt="Ellun Contabilidade" width="120">
      </a>
    </div>
  </header>

  <div class="container">

    <h1 class="mt-3 mb-3">Calculadora Simples Nacional</h1>

    <!-- NAVIGATION TABS -->
    <ul class="nav nav-tabs" id="myTab" role="tablist">
      <li class="nav-item">
        <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">Anexo III</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="anexo-tab" data-toggle="tab" href="#anexo" role="tab" aria-controls="anexo" aria-selected="false">Anexo V</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="lucro-tab" data-toggle="tab" href="#lucro" role="tab" aria-controls="lucro" aria-selected="false">Lucro Presumido</a>
      </li>
    </ul>

    <!-- TABS  CONTENT -->
    <div class="tab-content mt-3 mb-3" id="myTabContent">

      <!-- ANEXO III -->
      <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">

        <div class="container">

          <!-- RECEBIMENTOS NO BRASIL -->
          <div class="row">

            <!-- COL 1 -->
            <div class="col-2">
              <div class="form-group">
                <label for="rbt12">RBT12 (R$)</label>
                <input type="tel" id="rbt123" name="rbt12" class="money-mask form-control" data-mask="0.000.000,00" data-mask-reverse="true" value="0">
              </div>
            </div>

            <!-- COL 2 -->
            <div class="col-2">
              <div class="form-group">
                <label for="receita">Receita mensal (R$)</label>
                <input type="tel" id="receita" name="receita" class="money-mask form-control" data-mask="0.000.000,00" data-mask-reverse="true" value="0">
              </div>
            </div>

            <!-- COL 3 -->
            <div class="col-2">
              <div class="form-group">
                <label for="dasbr">DAS BR (R$)</label>
                <input type="tel" id="dasbr" name="dasbr" class="form-control" disabled>
              </div>
            </div>

          </div>

          <!-- RECEBIMENTOS NO EXTERIOR -->
          <div class="row">

            <!-- COL 1 -->
            <div class="col-2">
              <div class="form-group">
                <label for="rbt12Ext">RBT12 Exterior</label>
                <input type="tel" id="rbt123Ext" name="rbt12Ext" class="money-mask form-control" data-mask="0.000.000,00" data-mask-reverse="true" value="0">
              </div>
            </div>

            <!-- COL 2 -->
            <div class="col-2">
              <div class="form-group">
                <label for="receitaExt">Receita mensal Ext</label>
                <input type="tel" id="receitaExt" name="receitaExt" class="money-mask form-control" data-mask="0.000.000,00" data-mask-reverse="true" value="0">
              </div>
            </div>

            <!-- COL 4 -->
            <div class="col-2">
              <div class="form-group">
                <label for="dasext">DAS Ext (R$)</label>
                <input type="tel" id="dasext" name="dasext" class="form-control" disabled>
              </div>
            </div>
          </div>

          <div class="row">
            <!-- Nº DEPENDENTES -->
            <div class="col-2">
              <div class="form-group">
                <label for="receita">Nº de dependentes</label>
                <input type="number" id="dependentes" name="dependentes" class="form-control" min="0" max="10" value="0">
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col">
              <button type="button" id="btn-three" class="btn btn-primary">Calcular</button>
            </div>
          </div>

        </div>

        <div class="container">
          <div class="row">
            <div class="col">

              <!-- Resultado BR -->
              <table id="results" class="table table-bordered text-center">
                <thead>
                  <tr>
                    <th rowspan="2" class="align-middle">Alíquota efetiva BR</th>
                    <th colspan="6">Percentuais Efetivos dos Tributos BR</th>
                  </tr>
                  <tr>
                    <th>IRPJ</th>
                    <th>CSLL</th>
                    <th>Cofins</th>
                    <th>PIS/PASEP</th>
                    <th>CPP</th>
                    <th>ISS</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><span id="af">0</span></td>
                    <td><span id="irpj">0</span></td>
                    <td><span id="csll">0</span></td>
                    <td><span id="cofins">0</span></td>
                    <td><span id="pis">0</span></td>
                    <td><span id="cpp">0</span></td>
                    <td><span id="iss">0</span></td>
                  </tr>
                </tbody>
              </table>

              <!-- Resultado Ext -->
              <table id="results-ext" class="table table-bordered text-center">
                <thead>
                  <tr>
                    <th rowspan="2" class="align-middle">Alíquota efetiva Ext</th>
                    <th colspan="6">Percentuais Efetivos dos Tributos Ext</th>
                  </tr>
                  <tr>
                    <th>IRPJ</th>
                    <th>CSLL</th>
                    <th>Cofins</th>
                    <th>PIS/PASEP</th>
                    <th>CPP</th>
                    <th>ISS</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><span id="af-ext">0</span></td>
                    <td><span id="irpj-ext">0</span></td>
                    <td><span id="csll-ext">0</span></td>
                    <td><span id="cofins-ext">0</span></td>
                    <td><span id="pis-ext">0</span></td>
                    <td><span id="cpp-ext">0</span></td>
                    <td><span id="iss-ext">0</span></td>
                  </tr>
                </tbody>
              </table>

            </div>
          </div>

          <!-- TABELA FATOR R -->
          <div class="row">
            <div class="col">

              <table id="fatoR" class="table table-bordered text-center">
                <thead>
                  <tr>
                    <th>
                      Fator R &nbsp;
                      <select name="percentFR" id="percentFR" class="form-control d-inline" style="width: 80px">
                        <option value="0.28" selected>28%</option>
                        <option value="0.3">30%</option>
                      </select>
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td id="valorFR"></td>
                  </tr>
                </tbody>
              </table>

            </div>
          </div>

          <!-- TABELA PRO LABORE -->
          <div class="row">
            <div class="col">

              <table id="proLabore" class="table table-bordered">
                <tbody>
                  <tr>
                    <td><strong>Pro-Labore</strong></td>
                    <td id="proLab">0</td>
                    <td></td>
                  </tr>
                  <tr>
                    <td><strong>INSS 11%</strong></td>
                    <td id="inss">0</td>
                    <td>Vencimento dia 20 do mês subsequente</td>
                  </tr>
                  <tr>
                    <td id="aliquotaIr"><strong>IR</strong></td>
                    <td id="ir">0</td>
                    <td>Vencimento dia 20 do mês subsequente</td>
                  </tr>
                  <tr>
                    <td><strong>Pro-Labore Líquido</strong></td>
                    <td id="proLabLiquid">0</td>
                    <td>Transferir no último dia do mês</td>
                  </tr>
                </tbody>
              </table>

            </div>
          </div>

          <h4 class="my-3">Total de Impostos Mensais</h4>
          <p><strong>Prestadores de Serviços para Empresas Brasileiras: </strong><span id="psbr">0</span></p> 
          <p><strong>Prestadores de Serviços para Empresas Estrangeiras: </strong><span id="psext">0</span></p>

          <h4 class="mt-4 mb-3">Quadro de Despesas</h4>
          <p>
            <strong>Assessoria contábil: </strong><input type="tel" id="acessoria" name="acessoria" class="form-control d-inline" style="width:150px">
          </p>
          <p>
            <strong>Outras despesas: </strong><input type="tel" id="outras" name="outras" class="form-control d-inline" style="width:150px">
          </p>
          <button type="button" id="btnUpdLl" class="btn btn-primary">Atualizar</button>
          
          <p><strong>Lucro líquido: </strong><span id="lucroLiquido"></span></p>

        </div>

      </div>

      <!-- ANEXO V -->
      <div class="tab-pane fade" id="anexo" role="tabpanel" aria-labelledby="anexo-tab">
        
        <div class="container">

          <!-- RECEBIMENTOS NO BRASIL -->
          <div class="row">

            <!-- COL 1 -->
            <div class="col-2">
              <div class="form-group">
                <label for="rbt125">RBT12 (R$)</label>
                <input type="tel" id="rbt125" name="rbt125" class="form-control" data-mask="0.000.000,00" data-mask-reverse="true" value="0">
              </div>
            </div>

            <!-- COL 2 -->
            <div class="col-2">
              <div class="form-group">
                <label for="receita5">Receita mensal (R$)</label>
                <input type="tel" id="receita5" name="receita" class="form-control" data-mask="0.000.000,00" data-mask-reverse="true" value="0">
              </div>
            </div>

            <!-- COL 3 -->
            <div class="col-2">
              <div class="form-group">
                <label for="dasbr5">DAS BR (R$)</label>
                <input type="tel" id="dasbr5" name="dasbr" class="form-control" disabled>
              </div>
            </div>

          </div>

          <!-- RECEBIMENTOS NO EXTERIOR -->
          <div class="row">

            <!-- COL 1 -->
            <div class="col-2">
              <div class="form-group">
                <label for="rbt12Ext5">RBT12 Exterior</label>
                <input type="tel" id="rbt12Ext5" name="rbt12Ext5" class="form-control" data-mask="0.000.000,00" data-mask-reverse="true" value="0">
              </div>
            </div>

            <!-- COL 2 -->
            <div class="col-2">
              <div class="form-group">
                <label for="receitaExt5">Receita mensal Ext</label>
                <input type="tel" id="receitaExt5" name="receitaExt5" class="form-control" data-mask="0.000.000,00" data-mask-reverse="true" value="0">
              </div>
            </div>

            <!-- COL 3 -->
            <div class="col-2">
              <div class="form-group">
                <label for="dasext5">DAS EX</label>
                <input type="tel" id="dasext5" name="dasext" class="form-control" disabled>
              </div>
            </div>

          </div>

          <div class="row">
            <div class="col">
              <button type="button" id="btn-five" class="btn btn-primary">Calcular</button>
            </div>
          </div>
        </div>

        <!-- PERCENTUAIS -->
        <div class="container">

          <div class="row">
            <div class="col">

              <!-- Resultado BR -->
              <table id="results" class="table table-bordered text-center">
                <thead>
                  <tr>
                    <th rowspan="2" class="align-middle">Alíquota efetiva BR</th>
                    <th colspan="6">Percentuais Efetivos dos Tributos BR</th>
                  </tr>
                  <tr>
                    <th>IRPJ</th>
                    <th>CSLL</th>
                    <th>Cofins</th>
                    <th>PIS/PASEP</th>
                    <th>CPP</th>
                    <th>ISS</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><span id="af5">0</span></td>
                    <td><span id="irpj5">0</span></td>
                    <td><span id="csll5">0</span></td>
                    <td><span id="cofins5">0</span></td>
                    <td><span id="pis5">0</span></td>
                    <td><span id="cpp5">0</span></td>
                    <td><span id="iss5">0</span></td>
                  </tr>
                </tbody>
              </table>

              <!-- Resultado Ext -->
              <table id="results-ext" class="table table-bordered text-center">
                <thead>
                  <tr>
                    <th rowspan="2" class="align-middle">Alíquota efetiva Exterior</th>
                    <th colspan="6">Percentuais Efetivos dos Tributos Ext</th>
                  </tr>
                  <tr>
                    <th>IRPJ</th>
                    <th>CSLL</th>
                    <th>Cofins</th>
                    <th>PIS/PASEP</th>
                    <th>CPP</th>
                    <th>ISS</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><span id="af5-ext">0</span></td>
                    <td><span id="irpj5-ext">0</span></td>
                    <td><span id="csll5-ext">0</span></td>
                    <td><span id="cofins5-ext">0</span></td>
                    <td><span id="pis5-ext">0</span></td>
                    <td><span id="cpp5-ext">0</span></td>
                    <td><span id="iss5-ext">0</span></td>
                  </tr>
                </tbody>
              </table>

            </div>
          </div>

          <!-- TABELA PRO LABORE -->
          <div class="row">
            <div class="col">

              <table id="proLabore" class="table table-bordered">
                <tbody>
                  <tr>
                    <td><strong>Pro-Labore</strong></td>
                    <td>R$ 
                      <div class="inline-input">
                        <input type="tel" id="proLab5" name="rbt12" class="form-control" style="width:150px" data-mask="00.000.000,00" data-mask-reverse="true">
                        <button type="button" id="recalcular" class="btn btn-primary">Recalcular</button>
                      </div>
                    </td>
                    <td></td>
                  </tr>
                  <tr>
                    <td><strong>INSS 11%</strong></td>
                    <td id="inss5">0</td>
                    <td>Vencimento dia 20 do mês subsequente</td>
                  </tr>
                  <tr>
                    <td id="aliquotaIr5"><strong>IR</strong></td>
                    <td id="ir5">0</td>
                    <td>Vencimento dia 20 do mês subsequente</td>
                  </tr>
                  <tr>
                    <td><strong>Pro-Labore Líquido</strong></td>
                    <td id="proLabLiquid5">0</td>
                    <td>Transferir no último dia do mês</td>
                  </tr>
                </tbody>
              </table>

            </div>
          </div>

          <h4 class="my-3">Total de Impostos Mensais</h4>
          <p><strong>Prestadores de Serviços para Empresas Brasileiras: </strong><span id="psbr5">0</span></p> 
          <p><strong>Prestadores de Serviços para Empresas Estrangeiras: </strong><span id="psext5">0</span></p>

          <h4 class="mt-4 mb-3">Quadro de Despesas</h4>
          <p>
            <strong>Assessoria contábil: </strong>
            <input type="tel" id="acessoria5" name="acessoria" class="form-control d-inline" style="width:150px">
          </p>
          <p>
            <strong>Outras despesas: </strong>
            <input type="tel" id="outras5" name="outras" class="form-control d-inline" style="width:150px">
          </p>
          <button type="button" id="btnUpdLl5" class="btn btn-primary">Atualizar</button>
          
          <p>
            <strong>Lucro líquido: </strong>
            <span id="lucroLiquido5">0</span>
          </p>

        </div>

      </div>

      <!-- LUCRO PRESUMIDO -->
      <div class="tab-pane fade" id="lucro" role="tabpanel" aria-labelledby="lucro-tab">
        
        <div class="container">

          <!-- RECEITA NACIONAL -->
          <div class="row">

            <!-- Receita -->
            <div class="col-3">
              <div class="form-group">
                <label for="salario">Receita Mensal (R$)</label>
                <input type="tel" id="salario" class="form-control"  data-mask="0.000.000,00" data-mask-reverse="true" value="0">
              </div>
            </div>

            <!-- ISS -->
            <div class="col-3">
              <div class="form-group">
                <label for="issSelect">ISS</label>
                <select id="issSelect" class="form-control">
                  <option value="0.02" selected>2%</option>
                  <option value="0.03">3%</option>
                  <option value="0.04">4%</option>
                  <option value="0.05">5%</option>
                </select>
              </div>
            </div>

          </div>

          <!-- RECEITA EXTERIOR -->
          <div class="row">

            <!-- Receita -->
            <div class="col-3">
              <div class="form-group">
                <label for="salarioExt">Receita Mensal Ext.</label>
                <input type="tel" id="salarioExt" class="form-control"  data-mask="0.000.000,00" data-mask-reverse="true" value="0">
              </div>
            </div>

          </div>

          <div class="row">
            <div class="col">
              <button type="button" id="btn-lucro" class="btn btn-primary">Calcular</button>
            </div>
          </div>
        </div>

        <div class="container">

          <!-- LUCRO PRESUMIDO NACIONAL -->
          <div class="row">
            <div class="col">

              <table id="presumido" class="table table-bordered text-center">
                <thead>
                  <tr>
                    <th colspan="5">Lucro Presumido Brasil</th>
                  </tr>
                  <tr>
                    <th>PIS</th>
                    <th>Cofins</th>
                    <th>ISS</th>
                    <th>IRPJ</th>
                    <th>CSLL</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <th>0,65%</th>
                    <th>3,00%</th>
                    <th id="issSelected">Escolha</th>
                    <th>4,80%</th>
                    <th>2,88%</th>
                  </tr>
                  <tr>
                    <td><span id="pisLucro">0</span></td>
                    <td><span id="cofinsLucro">0</span></td>
                    <td><span id="issLucro">0</span></td>
                    <td><span id="irpjLucro">0</span></td>
                    <td><span id="csllLucro">0</span></td>
                  </tr>
                </tbody>
              </table>

            </div>
          </div>

          <!-- LUCRO PRESUMIDO EXTERIOR -->
          <div class="row">
            <div class="col">

              <table id="presumidoExt" class="table table-bordered text-center">
                <thead>
                  <tr>
                    <th colspan="5">Lucro Presumido Exterior</th>
                  </tr>
                  <tr>
                    <th>IRPJ</th>
                    <th>CSLL</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <th>4,80%</th>
                    <th>2,88%</th>
                  </tr>
                  <tr>
                    <td><span id="irpjLucroExt">0</span></td>
                    <td><span id="csllLucroExt">0</span></td>
                  </tr>
                </tbody>
              </table>

            </div>
          </div>

          <!-- IRPJ -->
          <div class="row">
            <div class="col">

              <table id="irpjAdicional" class="table table-bordered" style="width:60%">
                <tbody>
                  <tr>
                    <td><strong>IRPJ ADC (10%)</strong></td>
                    <td>Base 32%</td>
                    <td id="irpjAdc">R$ 0</td>
                  </tr>
                </tbody>
              </table>

            </div>
          </div>

          <!-- TABELA PRO LABORE LP -->
          <div class="row">
            <div class="col">

              <table id="proLaboreLp" class="table table-bordered">
                <tbody>
                  <tr>
                    <td><strong>Pro-Labore</strong></td>
                    <td>R$ 
                      <div class="inline-input">
                        <input type="tel" id="proLabLp" name="proLabLp" class="form-control" style="width:150px" data-mask="00.000.000,00" data-mask-reverse="true">
                        <button type="button" id="recalcularLp" class="btn btn-primary">Recalcular</button>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td><strong>INSS PJ 20%</strong></td>
                    <td><span id="inssPjLp">0</span></td>
                    <td>Vencimento dia 20 do mês subsequente</td>
                  </tr>
                  <tr>
                    <td><strong>INSS 11%</strong></td>
                    <td id="inssLp">0</td>
                    <td>Vencimento dia 20 do mês subsequente</td>
                  </tr>
                  <tr>
                    <td id="aliquotaIrLp"><strong>IR</strong></td>
                    <td id="irLp">0</td>
                    <td>Vencimento dia 20 do mês subsequente</td>
                  </tr>
                  <tr>
                    <td><strong>Pro-Labore Líquido</strong></td>
                    <td id="proLabLiquidoLp">0</td>
                    <td>Transferir no último dia do mês</td>
                  </tr>
                </tbody>
              </table>

            </div>
          </div>

          <h4 class="my-3">Imposto Mensal a Pagar</h4>
          <p><strong>Impostos a Pagar BR: </strong><span id="psbrLucro"></span></p> 
          <p><strong>Impostos a Pagar EX: </strong><span id="psextLucro"></span></p>

          <h4 class="mt-4 mb-3">Quadro de Despesas</h4>
          <p>
            <strong>Assessoria contábil: </strong>
            <input type="tel" id="acessoriaLp" name="acessoria" class="form-control d-inline" style="width:150px" value="0">
          </p>
          <p>
            <strong>Outras despesas: </strong>
            <input type="tel" id="outrasLp" name="outras" class="form-control d-inline" style="width:150px" value="0">
          </p>
          <button type="button" id="btnUpdLlLp" class="btn btn-primary">Atualizar</button>
          
          <p>
            <strong>Lucro líquido: </strong>
            <span id="lucroLiquidoLp"></span>
          </p>

        </div>

      </div>

    </div>

  </div>
  
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js" integrity="sha512-pHVGpX7F/27yZ0ISY+VVjyULApbDlD0/X0rgGbTqCE7WFW5MezNTWG/dnhtbBuICzsd0WQPgpE4REBLv+UqChw==" crossorigin="anonymous"></script>
  <script src="simples_functions.js"></script>
  
  <!-- SCRIPTS ANEXO III -->
  <script>
    $(document).ready( function() {
 
      function calcSn3() {

        var rbtBr = addDecimal($('#rbt123').cleanVal());
        var receita_mensal = addDecimal($('#receita').cleanVal());
        var rbtExt = addDecimal($('#rbt123Ext').cleanVal());
        var receitaExt = addDecimal($('#receitaExt').cleanVal());
        var deps = $('#dependentes').val();
        var rendaTotal = receita_mensal + receitaExt;

        /* RESULTADO BR */

        if(rbtBr > 0) {
          var res3 = snthree(rbtBr);

          var aliquota_efetiva = res3[0];
          var irpjBr = res3[1];
          var csllBr = res3[2];
          var cofinsBr = res3[3];
          var pisBr = res3[4];
          var cppBr = res3[5];
          var issBr = res3[6];

          $("#af").html(maskNumber(aliquota_efetiva) + "%");
          $("#irpj").html(maskNumber(irpjBr) + "%");
          $("#csll").html(maskNumber(csllBr) + "%");
          $("#cofins").html(maskNumber(cofinsBr) + "%");
          $("#pis").html(maskNumber(pisBr) + "%");
          $("#cpp").html(maskNumber(cppBr) + "%");
          $("#iss").html(maskNumber(issBr) + "%");
        }

        dasBrDec = 0;
        if(receita_mensal > 0) {
          dasBr = receita_mensal * (aliquota_efetiva/100);
          dasBrDec = dasBr.toFixed(2);
          $('#dasbr').val(dasBrDec).mask("0.000,00", { reverse: true });
        } else {
          dasBr = 0;
          $('#dasbr').val(dasBr);
        }

        /* RESULTADO EXT */

        if(rbtExt > 0) { 
          var res3Ext = snthree(rbtExt);

          var aliquota_ext = Number(res3Ext[1]) + Number(res3Ext[2]) + Number(res3Ext[5]);
          var irpjExt = res3Ext[1];
          var csllExt = res3Ext[2];
          var cppExt = res3Ext[5];

          $("#af-ext").html(maskNumber(aliquota_ext) + "%");
          $("#irpj-ext").html(maskNumber(irpjExt) + "%");
          $("#csll-ext").html(maskNumber(csllExt) + "%");
          $("#cpp-ext").html(maskNumber(cppExt) + "%");
        } else {
          $("#af-ext").text(0);
          $("#irpj-ext").text(0);
          $("#csll-ext").text(0);
          $("#cpp-ext").text(0);
        }

        if(receitaExt > 0) {
          dasExt = receitaExt * (aliquota_ext/100);
          dasExtDec = dasExt.toFixed(2);
          $('#dasext').val(dasExtDec).mask("0.000,00", { reverse: true });
        } else {
          dasExt = 0;
          dasExtDec = 0;
          $('#dasext').val(dasExt);
        }
        
        /* TABELA FATOR R */

        var percentR = $('#percentFR').val();
        var porcentagem = Number(percentR);

        /* TABELA PRO-LABORE */

        var proLab = proLaboreR(rendaTotal, aliquota_efetiva, porcentagem, deps);
        
        valorFR = proLab[0];

        $('#valorFR').html(maskValue(valorFR));
        $('#proLab').html(maskValue(valorFR));

        var valorInss = proLab[2];
        $('#inss').text(maskValue(valorInss));
        
        var percentIr = proLab[4]
        $('#aliquotaIr').html('<strong>IR ' + maskNumber(percentIr * 100) + '%</strong>');

        var valorIr = proLab[5];
        $('#ir').html(maskValue(valorIr));

        var valorIrBase = proLab[3];
        // var proLaboreLiquido = valorIrBase - valorIr;
        var proLaboreLiquido = valorFR - valorInss - valorIr;
        $('#proLabLiquid').html(maskValue(proLaboreLiquido));

        var proLabExt = proLaboreR(receitaExt, aliquota_ext, porcentagem, deps);

        /* Total de Impostos Mensais */
        var psBr = 0;
        var psExt = 0;

        if(rbtBr > 0) {
          psBr = dasBr + valorInss + valorIr;
        }
        $('#psbr').text(maskValue(psBr));
        
        if(rbtExt > 0 && rbtBr > 0) {
          psExt = dasExt;
        } else if(rbtExt > 0) {
          psExt = dasExt + proLabExt[2] + proLabExt[5];
        }
        $('#psext').text(maskValue(psExt));

        /* Lucro Líquido inicial*/
        var lucroLiquido = (receita_mensal + receitaExt) - valorFR - dasBrDec - dasExtDec;
        $('#lucroLiquido').text(maskValue(lucroLiquido));
      }
      
      $('#btn-three').click(calcSn3);

      $('#percentFR').change(calcSn3);

      /*
       * Função para cálculo do Lucro Líquido
       *
       * Lucro Líquido = Receita Mensal - Pro-Labore - Impostos Mensais (variando entre DAS BR e DAS EX) 
       * - Assessoria Contábil - Outras Despesas
       */

      $('#btnUpdLl').click( function() {
        var receita = addDecimal($('#receita').cleanVal());
        var recExt = addDecimal($('#receitaExt').cleanVal());
        var dasBr = $('#dasbr').val();
        var dasExt = $('#dasext').val();
        var asseCont = $('#acessoria').val();
        var outrasDesps = $('#outras').val();

        var lucroLiquido = receita + recExt - valorFR - dasBrDec - dasExtDec - asseCont - outrasDesps;
        $('#lucroLiquido').text(maskValue(lucroLiquido));
      });

    });
  </script>
  
  <!-- SCRIPTS ANEXO V -->
  <script>
    $(document).ready( function() { 
        
      function calcSn5() {

        var rbtBr5 = addDecimal($('#rbt125').cleanVal());
        receitaBr = addDecimal($('#receita5').cleanVal());
        var rbtExt5 = addDecimal($('#rbt12Ext5').cleanVal());
        receitaExt5 = addDecimal($('#receitaExt5').cleanVal());

        /* RESULTADO BR */

        // Cálculo Simples Brasil
        aliquota_efetiva5 = 0;
        if(rbtBr5 > 0) {
          var res5 = snfive(rbtBr5);

          aliquota_efetiva5 = res5[0];
          var irpjBr = res5[1];
          var csllBr = res5[2];
          var cofinsBr = res5[3];
          var pisBr = res5[4];
          var cppBr = res5[5];
          var issBr = res5[6];

          $("#af5").html(maskNumber(aliquota_efetiva5) + "%");
          $("#irpj5").html(maskNumber(irpjBr) + "%");
          $("#csll5").html(maskNumber(csllBr) + "%");
          $("#cofins5").html(maskNumber(cofinsBr) + "%");
          $("#pis5").html(maskNumber(pisBr) + "%");
          $("#cpp5").html(maskNumber(cppBr) + "%");
          $("#iss5").html(maskNumber(issBr) + "%");
        }

        // Cálculo DAS Brasil
        dasBr5Dec = 0;
        if(receitaBr > 0) {
          dasBr5 = receitaBr * (aliquota_efetiva5/100);
          dasBr5Dec = dasBr5.toFixed(2);
          $('#dasbr5').val(dasBr5Dec).mask("0.000,00", { reverse: true });
        } else {
          dasBr5 = 0;
          $('#dasbr5').val(dasBr5)
        }

        /* RESULTADO EXT */

        // Cálculo Simples Exterior
        var aliquota_ext = 0;
        if(rbtExt5 > 0) {
          var res5Ext = snfive(rbtExt5);
          
          var irpjExt = res5Ext[1];
          var csllExt = res5Ext[2];
          var cppExt = res5Ext[5];
          aliquota_ext = Number(irpjExt) + Number(csllExt) + Number(cppExt);

          $("#af5-ext").html(maskNumber(aliquota_ext) + "%");
          $("#irpj5-ext").html(maskNumber(irpjExt) + "%");
          $("#csll5-ext").html(maskNumber(csllExt) + "%");
          $("#cpp5-ext").html(maskNumber(cppExt) + "%");
        } else {
          $("#af5-ext").text(0);
          $("#irpj5-ext").text(0);
          $("#csll5-ext").text(0);
          $("#cpp5-ext").text(0);
        }

        // Cálculo DAS Exterior
        dasExt5Dec = 0;
        dasExt5 = 0;
        if(receitaExt5 > 0) {
          dasExt5 = receitaExt5 * (aliquota_ext/100);
          dasExt5Dec = dasExt5.toFixed(2);
          $('#dasext5').val(dasExt5Dec).mask("0.000,00", { reverse: true });
        } else {
          dasExt5 = 0;
          dasExt5Dec = 0;
          $('#dasext5').val(dasExt5);
        }

        /* TABELA PRO-LABORE */
        
        salario = 1412;
        var rendaTotalV = receitaBr + receitaExt5;
        var aliquotaTotalV = aliquota_ext + aliquota_efetiva5;
        
        var proLab = proLaboreR(salario, aliquotaTotalV);
        //0:fatorR, 1:inssBase, 2:inss, 3:irBase, 4:ir, 5:valorIR

        //salario = proLab[0];
        $('#proLab5').val('1.412,00');

        /* Cálculo INSS */
        var inss5 = proLab[1];
        $('#inss5').text(maskValue(inss5));

        // Percentual do IR
        var percentIR = proLab[4];
        $('#aliquotaIr5').html('<strong>IR 0%</strong>');
        // Valor do IR
        var totalIr = proLab[5];
        $('#ir5').html('R$ 0,00');

        // var proLaboreLiquido = proLab[3] - totalIr;
        var proLaboreLiquido = salario - inss5 - totalIr;
        $('#proLabLiquid5').html(maskValue(proLaboreLiquido));

        /*** IMPOSTOS MENSAIS ***/

        var impostosBr = 0;
        var impostosExt = 0;
        // Somente BR
        if (rbtBr5 > 0 && rbtExt5 === 0) {
            impostosBr = dasBr5 + inss5 + totalIr;
        } 
        // BR + Exterior
        else if (rbtBr5 > 0 && rbtExt5 > 0) {
            impostosBr = dasBr5 + inss5 + totalIr;
            impostosExt = dasExt5;
        }
        // Somente Exterior 
        else if (rbtBr5 === 0 && rbtExt5 > 0) {
            impostosExt = dasExt5 + inss5 + totalIr;
        }
        $('#psbr5').text(maskValue(impostosBr));
        $('#psext5').text(maskValue(impostosExt));

        /* Lucro Líquido inicial */
        // LL = salarioBR + salarioExt - ImpostosBR - ImpostosExt - ProLabLiquido
        var lucroLiquido = receitaBr + receitaExt5 - proLaboreLiquido - impostosBr - impostosExt; // ProLab Líquido
        $('#lucroLiquido5').text(maskValue(lucroLiquido));
      }

      /* Calcular Simples Anexo V */

      $('#btn-five').click(calcSn5);

      /*****************************
        Recálculos do Pró-Labore V 
      ******************************/

      $('#recalcular').click(function() {

        var proLab5 = addDecimal($('#proLab5').cleanVal());
        var newProLab = recalcProLab(proLab5);

        var inss5 = newProLab[0];
        var irBase5 = newProLab[1];
        var ir5 = newProLab[2];
        var valorIr5 = newProLab[3];
        var proLaboreLiquido5 = irBase5 - valorIr5;

        // Set INSS
        $('#inss5').text(maskValue(inss5));

        // Set IR
        $('#aliquotaIr5').html('<strong>IR ' + maskNumber(ir5 * 100) + '%</strong>');
        $('#ir5').html(maskValue(valorIr5));

        // Set PL Liquido
        $('#proLabLiquid5').html(maskValue(proLaboreLiquido5));

        /*** IMPOSTOS MENSAIS ***/

        var receita_mensal = addDecimal($('#receita5').cleanVal());
        var fatorR = receita_mensal * 0.28;

        var receita_ext = addDecimal($('#receitaExt5').cleanVal());

        var af5 = percentToNum($("#af5").html());
        var irpj = percentToNum($("#irpj5").html());
        var csll = percentToNum($("#csll5").html());
        var cpp = percentToNum($("#cpp5").html());
        
        var dasBr5 = receita_mensal * (af5/100);
        var aliquota_ext = irpj + csll + cpp;
        var dasext5Val = $('#dasext5').val();
        var dasExtDecimal = addDecimal($('#dasext5').cleanVal());
        var dasExt5 = dasExtDecimal > 0 ? dasExtDecimal : 0;

        var rbtBr5 = addDecimal($('#rbt125').cleanVal());
        var rbtExt5 = addDecimal($('#rbt12Ext5').cleanVal());

        //Total de Impostos
        var impostosBr = 0;
        var impostosExt = 0;
        // Somente BR
        if (rbtBr5 > 0 && rbtExt5 === 0) {
            impostosBr = dasBr5 + inss5 + valorIr5;
        } 
        // BR + Exterior
        else if (rbtBr5 > 0 && rbtExt5 > 0) {
            impostosBr = dasBr5 + inss5 + valorIr5;
            impostosExt = dasExt5;
        }
        // Somente Exterior 
        else if (rbtBr5 === 0 && rbtExt5 > 0) {
            impostosExt = dasExt5 + inss5 + valorIr5;
        }
        $('#psbr5').text(maskValue(impostosBr));
        $('#psext5').text(maskValue(impostosExt));

        /*** LUCRO LIQUIDO ***/
        // LL = salarioBR + salarioExt - ImpostosBR - ImpostosExt - ProLabLiquido
        var lucroLiquido = (receitaBr + receitaExt5) - impostosBr - impostosExt - proLaboreLiquido5;
        $('#lucroLiquido5').text(maskValue(lucroLiquido));
      })

      /******** 
      Atualizar Lucro Líquido 
      *********/
      
      $('#btnUpdLl5').click( function() {
        var proLab5 = addDecimal($('#proLab5').cleanVal());
        var receita = addDecimal($('#receita5').cleanVal());
        var dasBr = $('#dasbr5').val();
        var dasExt = $('#dasext5').val();
        var asseCont = $('#acessoria5').val();
        var outrasDesps = $('#outras5').val();
        
        var lucroLiquido = (receitaBr + receitaExt5) - proLab5 - dasBr5Dec - dasExt5Dec - asseCont - outrasDesps;
        $('#lucroLiquido5').text(maskValue(lucroLiquido));
      });
    });
  </script>
  
  <!-- SCRIPTS LUCRO -->
  <script>
    $(document).ready( function() {

      $('#btn-lucro').click( function() {
        var salario = addDecimal($('#salario').cleanVal());
        var aliquota_iss = $('#issSelect').val();
        var salarioExt = addDecimal($('#salarioExt').cleanVal());

        // Lucro Presumido Nacional
        irTotalLp = 0;

        if(salario > 0) {
          var result = lucroPresumido(salario, aliquota_iss);

          pisLl = result[0];
          confinsLl = result[1];
          issLl = result[2];
          irpjLp = result[3];
          csllLp = result[4];
          irpjAdcLp = result[5];

          $("#pisLucro").html(maskValue(pisLl));
          $("#cofinsLucro").html(maskValue(confinsLl));
          $("#issLucro").html(maskValue(issLl));
          $("#irpjLucro").html(maskValue(irpjLp));
          $("#csllLucro").html(maskValue(csllLp));
          $("#issSelected").html((aliquota_iss * 100) + "%");

          irTotalLp = result.reduce((a, b) => a + b, 0);
        }

        // Lucro Presumido Exterior
        irpjLpExt = 0;
        csllLpExt = 0;
        if(salarioExt > 0) {
          var result = lucroPresumido(salarioExt, 0);

          //0 e 1 têm valores
          irpjLpExt = result[3];
          csllLpExt = result[4];
          
          $("#irpjLucroExt").html(maskValue(irpjLpExt));
          $("#csllLucroExt").html(maskValue(csllLpExt));
        }

        /*
         * TABELA PRO LABORE LP
         */
        irLp = 0;
        inssLp = 0;
        if(salario > 0 || salarioExt > 0) {

          var proLab = proLaboreR(salario, 0, aliquota_iss);

          var frLp = proLab[0];

          //var inssBaseLp = proLab[1];
          inssLp = proLab[1];
          var irBaseLp = proLab[3];
          var percentIrLp = proLab[4];
          irLp = proLab[5] > 0 ? proLab[5] : 0;

          /*** Campo Pro-Labore ***/
          
          $('#proLabLp').val('1.412,00');
          var valorProLabore = addDecimal($('#proLabLp').cleanVal());

          /*** Linha INSS ***/

          var valorInss = maskValue(inssLp);
          $('#inssLp').text(valorInss);

          /*** Linha INSS PJ ***/

          var valorInssPj = valorProLabore * 0.2;
          var inssPj = maskValue(valorInssPj);
          $('#inssPjLp').text(inssPj);

          /*** Linha IR ***/

          // Porcentagem IR
          var percentIR = maskNumber(percentIrLp * 100);
          $('#aliquotaIrLp').html('<strong>IR ' + percentIR + '%</strong>');

          // Valor IR
          $('#irLp').html(maskValue(irLp));

          // IRPJ Adicional
          var salario32 = (salario + salarioExt) * 0.32;
          irpjAdcLp = 0;

          if (salario32 > 20000) {
            var salarioBase = salario32 - 20000;
            irpjAdcLp = salarioBase * 0.1;
          }

          $("#irpjAdc").html(maskValue(irpjAdcLp));

          /*** Linha Pro-Labore Líquido ***/

          var proLaboreLiquido = valorProLabore - inssLp - irLp;
          $('#proLabLiquidoLp').html(maskValue(proLaboreLiquido));
        
          /* 
          * IMPOSTO MENSAL A PAGAR
          *
          * Imposto a Pagar BR (Considerar todos os Impostos + IRPJ Adc)
          * Imposto a Pagar EX (Considerar somente IRPJ + CSLp [+ IRPJ Adc])
          */

          var impostosBrLp = 0;
          var impostosExtLp = 0;
          var totalImpLPresumidoBr = 0;
          var totalImpLPresumidoExt = 0;

          // 2 Salários
          if (salario > 0 && salarioExt > 0) {
            totalImpLPresumidoBr = pisLl + confinsLl + issLl + irpjLp + csllLp;
            totalImpLPresumidoExt = irpjLpExt + csllLpExt;
            // irTotalLp = pisLl + confinsLl + issLl + irpjLp + csllLp + irpjAdcLp
            impostosBrLp = totalImpLPresumidoBr + irpjAdcLp + valorInssPj + inssLp + irLp;
            impostosExtLp = totalImpLPresumidoExt;
          } 
          // Somente BR => totalLPBr + IRPJAdc + INSSPj + INSS
          else if (salario > 0 && salarioExt == 0) {
            impostosBrLp = irTotalLp + valorInssPj + inssLp + irLp;
          } 
          // Somente Ext => totalLPExt + IRPJAdc + INSSPj + INSS
          else if (salario == 0 && salarioExt > 0) {
            totalImpLPresumidoExt = irpjLpExt + csllLpExt;
            impostosExtLp = totalImpLPresumidoExt + valorInssPj + inssLp  + irpjAdcLp;
          }

          $("#psbrLucro").html(maskValue(impostosBrLp));
          $("#psextLucro").html(maskValue(impostosExtLp));

          // LL = ReceitaBr + ReceitaExt - LPBr (irTotalLp) - LPExt (totalLpExt) - irpjAdcLp - ProLabLiquido
          var lucroLiquidoLp = (salario + salarioExt) - impostosBrLp  - impostosExtLp - proLaboreLiquido;
          $('#lucroLiquidoLp').text(maskValue(lucroLiquidoLp));
        }

      });

      // Mascarar campos adicionais
      $('#acessoriaLp').mask("##.##0,00", { reverse: true });
      $('#outrasLp').mask("##.##0,00", { reverse: true });

      /***************************************
       *
       * RECALCULAR PRO-LABORE LUCRO PRESUMIDO
       * 
       ***************************************/

      function recalcPlValues() {
        var proLabLp = addDecimal($('#proLabLp').cleanVal());

        var newProLab = recalcProLab(proLabLp);

        var inssLp = newProLab[0];
        var irBaseLp = newProLab[1];
        var taxIrLp = newProLab[2];
        var valorIrLp = newProLab[3];
        var inssPjLp = proLabLp * 0.2;
        proLaboreLiquidoLp = irBaseLp - valorIrLp;

        // Set INSS
        $('#inssLp').text(maskValue(inssLp));

        // Set INSSPJ
        $('#inssPjLp').text(maskValue(inssPjLp));

        // Set IR
        $('#aliquotaIrLp').html('<strong>IR ' + maskNumber(taxIrLp * 100) + '%</strong>');
        $('#irLp').html(maskValue(valorIrLp));

        // Set PL Liquido
        $('#proLabLiquidoLp').html(maskValue(proLaboreLiquidoLp));

        /*** IMPOSTOS MENSAIS ***/

        var salarioLp = addDecimal($('#salario').cleanVal());
        var salarioLpExt = addDecimal($('#salarioExt').cleanVal());

        // Set Impostos a Pagar
        impostosBrLp = 0;
        impostosExtLp = 0;
        var totalImpLPresumidoBr = pisLl + confinsLl + issLl + irpjLp + csllLp;
        var totalImpLPresumidoExt = irpjLpExt + csllLpExt;

        // 2 Salários
        if (salarioLp > 0 && salarioLpExt > 0) {
          // irTotalLp = pisLl + confinsLl + issLl + irpjLp + csllLp + irpjAdcLp
          impostosBrLp = totalImpLPresumidoBr + irpjAdcLp + inssPjLp + inssLp + valorIrLp;
          impostosExtLp = totalImpLPresumidoExt;
        } 
        // Somente BR => totalLPBr + IRPJAdc + INSSPj + INSS
        else if (salarioLp > 0 && salarioLpExt == 0) {
          impostosBrLp = irTotalLp + inssPjLp + inssLp + valorIrLp;
        } 
        // Somente Ext => totalLPExt + IRPJAdc + INSSPj + INSS
        else if (salarioLp == 0 && salarioLpExt > 0) {
          impostosExtLp = totalImpLPresumidoExt + inssPjLp + inssLp  + irpjAdcLp;
        }

        $("#psbrLucro").html(maskValue(impostosBrLp));
        $("#psextLucro").html(maskValue(impostosExtLp));

        // LL = ReceitaBr + ReceitaExt - LPBr (irTotalLp) - LPExt (totalLpExt) - irpjAdcLp - ProLabLiquido
        var lucroLiquidoLp = (salarioLp + salarioLpExt) - impostosBrLp  - impostosExtLp - proLaboreLiquidoLp;
        $('#lucroLiquidoLp').text(maskValue(lucroLiquidoLp));
      }
      
      $('#recalcularLp').click(recalcPlValues);

      /**********
       * ATUALIZA O LUCRO LIQUIDO COM DESPESAS EXTRAS
       *********/

      $('#btnUpdLlLp').click( function() {
        // lucroLiquidoLp = (salarioLp + salarioLpExt) - impostosBrLp  - impostosExtLp - proLaboreLiquidoLp;
        let salarioBr = addDecimal($('#salario').cleanVal());
        let salarioExt = addDecimal($('#salarioExt').cleanVal());
        var proLaboreLiquidoLp = currencyToNum($('#proLabLiquidoLp').text());
        var impostosBrLp = currencyToNum($('#psbrLucro').text());
        var impostosExtLp = currencyToNum($('#psextLucro').text());
        var asseCont = currencyToNum($('#acessoriaLp').val());
        var outrasDesps = currencyToNum($('#outrasLp').val());
        
        var lucroLiquidoAtual = (salarioBr + salarioExt) - impostosBrLp  - impostosExtLp - proLaboreLiquidoLp;
        var lucroLiquidoTotal = lucroLiquidoAtual - asseCont - outrasDesps
        $('#lucroLiquidoLp').text(maskValue(lucroLiquidoTotal));
      });

    });
  </script>

</body>
</html>